(function(e){function t(t){for(var r,a,s=t[0],c=t[1],l=t[2],h=0,d=[];h<s.length;h++)a=s[h],i[a]&&d.push(i[a][0]),i[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(d.length)d.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(r=!1)}r&&(o.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},i={app:0},o=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/whiteboard/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1449:function(e,t,n){"use strict";n.r(t);n("c5f6");var r=n("795b"),i=n.n(r),o=(n("96cf"),n("3b8d"));window.delay=function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new i.a(function(e){return setTimeout(e,t)}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Number.prototype.round=function(e){var t=window.Math.pow(10,e);return window.Math.round(this*t)/t}},"3a61":function(e,t,n){"use strict";var r=n("cb1b"),i=n.n(r);i.a},"56d7":function(e,t,n){"use strict";n.r(t);n("96cf");var r,i=n("3b8d");n("cadf"),n("551c"),n("f751"),n("097d");r={socket:{url:"https://diliviri.com/",namespace:"superadmin"},http:{main:"db/"}};var o=r,a=(n("ab8b"),n("87b8"),n("9180"),n("2b0e")),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"opacity"}},[n("whiteboard",{on:{clear:e.clearDrawing,draw:e.sendDrawing}})],1)},c=[],l=n("f499"),u=n.n(l),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"container",staticStyle:{position:"relative",width:"100%",height:"100%","background-color":"white",overflow:"hidden"}},[n("div",{staticClass:"canvascontainer",staticStyle:{position:"relative",width:"vw",height:"vh","background-color":"white"}},[n("canvas",{ref:"cbook",staticStyle:{position:"relative"},style:e.eraser?"cursor: no-drop;":"",attrs:{width:e.can_width,height:e.can_height}},[n("strong",[e._v("[Your browser can not show this example.]")])])]),e.capturing?e._e():n("div",{staticClass:"settings",staticStyle:{"background-color":"#0000ff75",width:"50px",height:"50px","border-radius":"50%",position:"absolute",left:"10px",bottom:"10px",display:"flex",cursor:"pointer","user-select":"none","justify-content":"center","align-items":"center"},on:{click:function(t){e.settingVisible=!e.settingVisible}}},[e._v("...")]),!e.capturing&&e.settingVisible?n("div",{staticClass:"controls",staticStyle:{position:"absolute",left:"70px",bottom:"0px",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[n("div",{staticClass:"tips",staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.strokeStyle,expression:"strokeStyle"}],staticStyle:{"min-width":"5px","min-height":"5px",padding:"0","border-radius":"50%",overflow:"hidden",border:"1px solid black","margin-right":"5px"},style:{width:e.lineWidth+"px",height:e.lineWidth+"px"},attrs:{type:"color",disabled:e.eraser},domProps:{value:e.strokeStyle},on:{input:function(t){t.target.composing||(e.strokeStyle=t.target.value)}}}),n("div",{staticClass:"eraser"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.eraser,expression:"eraser"}],attrs:{type:"checkbox",id:"eraser"},domProps:{checked:Array.isArray(e.eraser)?e._i(e.eraser,null)>-1:e.eraser},on:{change:function(t){var n=e.eraser,r=t.target,i=!!r.checked;if(Array.isArray(n)){var o=null,a=e._i(n,o);r.checked?a<0&&(e.eraser=n.concat([o])):a>-1&&(e.eraser=n.slice(0,a).concat(n.slice(a+1)))}else e.eraser=i}}}),n("label",{staticStyle:{margin:"0"},attrs:{for:"eraser"}},[e._v("Eraser")])])]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.rangeVal,expression:"rangeVal"}],staticStyle:{"min-width":"200px",width:"25vw",height:"5vw"},attrs:{type:"range",list:"tickmarks",min:"1",max:"50"},domProps:{value:e.rangeVal},on:{__r:function(t){e.rangeVal=t.target.value}}})]):e._e(),!e.capturing&&e.settingVisible?n("div",{staticClass:"controls",staticStyle:{position:"absolute",left:"10px",bottom:"70px",display:"flex","flex-direction":"column","justify-content":"center","align-items":"flex-start"}},[n("input",{staticStyle:{"margin-bottom":"5px"},attrs:{type:"button",value:"clear"},on:{click:function(t){return e.clearCanvas(!1)}}}),n("input",{staticStyle:{"margin-bottom":"5px"},attrs:{type:"button",value:"save"},on:{click:e.save}}),n("input",{staticStyle:{"margin-bottom":"5px"},attrs:{type:"button",value:"fullscreen"},on:{click:e.fullscreen}})]):e._e()])},d=[],p=(n("a481"),n("75fc")),f=n("5d73"),w=n.n(f),v=n("c0e9"),m=n.n(v),g=new a["a"];window.h2c=m.a;var b={data:function(){return{isFullscreen:!1,settingVisible:!1,canvas:null,context:null,cb_lastPoints:{},can_width:400,can_height:200,rangeVal:10,strokeStyle:"#005AFF",backColor:"rgb(255,255,255)",eraser:!1,capturing:!1}},mounted:function(){var e=this;this.canvas=this.$refs.cbook,this.can_height=window.screen.height,this.can_width=window.screen.width,this.context=this.canvas.getContext("2d"),this.context.globalCompositeOperation="destination-atop",this.context.lineWidth=this.lineWidth,this.context.strokeStyle=this.eraser?this.backColor:this.strokeStyle.hex8||this.strokeStyle,this.context.lineCap="round",this.context.beginPath(),this.canvas.onmousedown=this.startDraw,this.canvas.onmouseup=this.stopDraw,this.canvas.ontouchstart=this.startDraw,this.canvas.ontouchstop=this.stopDraw,this.canvas.ontouchmove=this.drawMouse,g.$on("canvasDraw",this.drawRemoteLines),g.$on("canvasClear",function(){return e.clearCanvas(!0)})},methods:{startDraw:function(e){if(e.touches)for(var t=1;t<=e.touches.length;t++){var n=this.getCoords(e.touches[t-1]);this.cb_lastPoints[e.touches[t-1].identifier]=n}else{var r=this.getCoords(e);this.cb_lastPoints[0]=r,this.canvas.onmousemove=this.drawMouse}return!1},stopDraw:function(e){e.preventDefault(),this.canvas.onmousemove=null},drawMouse:function(e){var t,n=[];if(e.touches)for(var r=1;r<=e.touches.length;r++){t=this.getCoords(e.touches[r-1]);var i=[this.cb_lastPoints[e.touches[r-1].identifier].x,this.cb_lastPoints[e.touches[r-1].identifier].y,t.x,t.y];this.cb_lastPoints[e.touches[r-1].identifier]=this.drawLine.apply(this,i),n.push(i)}else{t=this.getCoords(e);var o=[this.cb_lastPoints[0].x,this.cb_lastPoints[0].y,t.x,t.y];n.push(o),this.cb_lastPoints[0]=this.drawLine.apply(this,o)}return this.context.lineWidth=this.lineWidth,this.context.strokeStyle=this.eraser?this.backColor:this.strokeStyle.hex8||this.strokeStyle,this.context.lineCap="round",this.context.stroke(),this.$emit("draw",{type:"drawLine",coords:n,lineCap:this.context.lineCap,strokeStyle:this.context.strokeStyle,lineWidth:this.context.lineWidth}),this.context.closePath(),this.context.beginPath(),!1},drawLine:function(e,t,n,r){return this.context.moveTo(e,t),this.context.lineTo(n,r),{x:n,y:r}},drawRemoteLines:function(e){this.context.beginPath();var t=!0,n=!1,r=void 0;try{for(var i,o=w()(e.coords);!(t=(i=o.next()).done);t=!0){var a=i.value;this.drawLine.apply(this,Object(p["a"])(a))}}catch(s){n=!0,r=s}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}this.context.lineWidth=e.lineWidth,this.context.strokeStyle=e.strokeStyle,this.context.lineCap=e.lineCap,this.context.stroke(),this.context.closePath()},getCoords:function(e){return e.offsetX?{x:e.offsetX,y:e.offsetY}:e.layerX?{x:e.layerX,y:e.layerY}:{x:e.pageX-this.canvas.offsetLeft,y:e.pageY-this.canvas.offsetTop}},clearCanvas:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.context.clearRect(0,0,this.canvas.width,this.canvas.height),e||this.$emit("clear")},save:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.capturing=!0,e.next=3,this.$nextTick();case 3:m()(this.$refs.container).then(function(e){var n=document.createElement("a");n.setAttribute("download","MintyPaper.png"),n.setAttribute("href",e.toDataURL("image/png").replace("image/png","image/octet-stream")),t.capturing=!1,n.click()});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),fullscreen:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.isFullscreen?window.document.exitFullscreen():this.$refs.container.requestFullscreen(),this.isFullscreen=!this.isFullscreen;case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},computed:{lineWidth:function(){return this.rangeVal<25?this.rangeVal:this.rangeVal<40?1.5*this.rangeVal:2*this.rangeVal}},watch:{tips:{deep:!0,handler:function(){}},strokeStyle:function(e){console.log(e)}}},y=b,x=(n("3a61"),n("2877")),k=Object(x["a"])(y,h,d,!1,null,null,null),C=k.exports,S=n("795b"),_=n.n(S),R={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun.stunprotocol.org"}]};function O(e){return D.apply(this,arguments)}function D(){return D=Object(i["a"])(regeneratorRuntime.mark(function e(t){var n,r,o,a,s,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,o=new _.a(function(e){return n=e}),a={offer:null,answer:null,setAnswer:function(e){return a.pc.setRemoteDescription(new RTCSessionDescription(e))},pc:new RTCPeerConnection(R),connected:new _.a(function(e){return r=e}),channel:{dataChannel:null,on:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};e&&(a.__eventListeners[e]=t)},emit:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.connected;case 2:a.channel.dataChannel.send(u()({event:t,data:n}));case 3:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}()},__eventListeners:{}},s=function(e){try{var t=JSON.parse(e.data);t.candidate?a.pc.addIceCandidate(t.candidate).catch(console.error):a.__eventListeners[t.event]&&a.__eventListeners[t.event](t.data)}catch(n){console.error(n)}},a.pc.onicecandidate=function(e){if(e.candidate)return c?a.connected.then(function(){a.channel.dataChannel.send(u()({candidate:e.candidate.toJSON()}))}):(c=!0,n())},t){e.next=14;break}return a.channel.dataChannel=a.pc.createDataChannel("dataChannel"),a.channel.dataChannel.onopen=function(){a.channel.dataChannel.onmessage=s,r()},a.pc.createOffer().then(function(e){a.pc.setLocalDescription(e)}).catch(console.error),e.next=11,o;case 11:a.offer=a.pc.localDescription.toJSON(),e.next=18;break;case 14:return a.pc.ondatachannel=function(e){a.channel.dataChannel=e.channel,r(),a.channel.dataChannel.onmessage=s},e.next=17,a.pc.setRemoteDescription(t).then(function(){return a.pc.createAnswer()}).then(function(e){return a.pc.setLocalDescription(e)}).then(function(){return o}).then(function(){return a.pc.localDescription.toJSON()});case 17:a.answer=e.sent;case 18:return e.abrupt("return",a);case 21:return e.prev=21,e.t0=e["catch"](0),console.error(e.t0),e.abrupt("return",null);case 25:case"end":return e.stop()}},e,null,[[0,21]])})),D.apply(this,arguments)}var P={data:function(){return{showpopup:!1,conn:null,server:!0}},components:{whiteboard:C},created:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=window.location.hash.slice(1),t){this.server=!1;try{t=JSON.parse(decodeURIComponent(t))}catch(r){console.error(r),alert("provided link is now correct!!!"),window.location=window.location.href.slice(0,window.location.href.indexOf("#"))}}return e.next=4,O(t);case 4:this.conn=e.sent,this.conn.channel.on("canvasDraw",function(e){console.log("remoteDraw"),g.$emit("canvasDraw",e)}),this.conn.channel.on("canvasClear",function(e){console.log("remoteclear"),g.$emit("canvasClear",e)}),this.conn.offer?(console.log(window.location+"#"+encodeURIComponent(u()(this.conn.offer))),n=window.prompt(window.location+"#"+encodeURIComponent(u()(this.conn.offer))),n=decodeURIComponent(n),this.conn.setAnswer(JSON.parse(n))):window.alert(encodeURIComponent(u()(this.conn.answer)));case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){window.setTimeout(function(){var e=document.getElementById("preloader");e&&(e.style.transition=".3s",e.style.opacity=0,setTimeout(function(){return e.parentNode.removeChild(e)},300))},1e3)},methods:{clearDrawing:function(){this.conn.channel.emit("canvasClear",{})},sendDrawing:function(e){this.conn.channel.emit("canvasDraw",e)},createconnection:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:this.conn=e.sent,this.conn.channel.on("canvasDraw",function(e){g.$emit("canvasDraw",e)}),this.conn.channel.on("canvasClear",function(e){g.$emit("canvasClear",e)}),console.log(window.location+"#"+encodeURIComponent(u()(this.conn.offer))),t=window.prompt(window.location+"#"+encodeURIComponent(u()(this.conn.offer))),t=decodeURIComponent(t),this.conn.setAnswer(JSON.parse(t));case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),popupanswer:function(){}},watch:{},computed:{}},j=P,L=(n("5c0b"),Object(x["a"])(j,s,c,!1,null,null,null)),N=L.exports;n("1449"),window.serverconfig=o;var V=n("fe3c");V.attach(document.body),n("8aa8"),a["a"].mixin({data:function(){return{}}}),a["a"].config.productionTip=!0,new a["a"]({data:{user:null,showmoviedetail:!1,movie:{}},render:function(e){return e(N)}}).$mount("#app");var W=function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.navigator.wakeLock.request("screen");case 3:window.wakeLock=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),console.error(e.t0);case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(){return e.apply(this,arguments)}}();W();var T=function(){null!==window.wakeLock&&"visible"===window.document.visibilityState&&W()};window.document.addEventListener("visibilitychange",T),window.document.addEventListener("fullscreenchange",T)},"5c0b":function(e,t,n){"use strict";var r=n("5e27"),i=n.n(r);i.a},"5e27":function(e,t,n){},"87b8":function(e,t,n){},"8aa8":function(e,t,n){"use strict";n.r(t);var r,i,o=n("f499"),a=n.n(o),s=(n("34ef"),n("a481"),n("14b9"),n("795b")),c=n.n(s),l=(n("cadf"),n("551c"),n("f751"),n("097d"),n("9483")),u="BJIGTwPsHQ_J1Yg_9xbUDLnrz_jTq8-nDxuU3_nXPF7-DNU645CLMBsrm73g6HefM74RSTjtLr2upgWKQ30SFLk";function h(e){for(var t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/-/g,"+").replace(/_/g,"/"),r=window.atob(n),i=new Uint8Array(r.length),o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}window.serviceWorkerPromise=new c.a(function(e){return r=e}),window.subscribeUser=function(){return new c.a(function(e,t){if("granted"==window.Notification.permission)return e('localStorage.getItem("pushNotificationCredentials")');window.serviceWorkerPromise.then(function(n){n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:h(u)}).then(function(t){window.localStorage.setItem("pushNotificationCredentials",a()(t)),e(t)}).catch(t)})})},window.propforinstall=null,Object(l["a"])("".concat("/whiteboard/","service-worker.js"),{registered:r}),(window.navigator||{}).serviceWorker&&window.navigator.serviceWorker.ready.then(function(){window.addEventListener("beforeinstallprompt",function(e){e.preventDefault(),i=e,window.propforinstall=function(){i.prompt(),i.userChoice.then(function(e){"accepted"===e.outcome&&window.subscribeUser(),i=null})}})})},9180:function(e,t,n){},cb1b:function(e,t,n){}});