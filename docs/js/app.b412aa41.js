(function(t){function e(e){for(var r,a,s=e[0],c=e[1],l=e[2],h=0,d=[];h<s.length;h++)a=s[h],i[a]&&d.push(i[a][0]),i[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(d.length)d.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(r=!1)}r&&(o.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},i={app:0},o=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/whiteboard/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},1449:function(t,e,n){"use strict";n.r(e);n("c5f6");var r=n("795b"),i=n.n(r),o=(n("96cf"),n("3b8d"));window.delay=function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new i.a(function(t){return setTimeout(t,e)}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),Number.prototype.round=function(t){var e=window.Math.pow(10,t);return window.Math.round(this*e)/e}},"3a61":function(t,e,n){"use strict";var r=n("cb1b"),i=n.n(r);i.a},"56d7":function(t,e,n){"use strict";n.r(e);n("96cf");var r,i=n("3b8d");n("cadf"),n("551c"),n("f751"),n("097d");r={socket:{url:"https://diliviri.com/",namespace:"superadmin"},http:{main:"db/"}};var o=r,a=(n("ab8b"),n("87b8"),n("9180"),n("2b0e")),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"opacity"}},[n("whiteboard",{on:{clear:t.clearDrawing,draw:t.sendDrawing}})],1)},c=[],l=n("f499"),u=n.n(l),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"container",staticStyle:{position:"relative",width:"100%",height:"100%","background-color":"white",overflow:"hidden"}},[n("div",{staticClass:"canvascontainer",staticStyle:{position:"relative",width:"vw",height:"vh","background-color":"white"}},[n("canvas",{ref:"cbook",staticStyle:{position:"relative"},style:t.eraser?"cursor: no-drop;":"",attrs:{width:t.can_width,height:t.can_height}},[n("strong",[t._v("[Your browser can not show this example.]")])])]),t.capturing?t._e():n("div",{staticClass:"settings",staticStyle:{border:"1px solid black",padding:"5px","background-color":"rgb(63 117 255)",width:"40px",height:"40px","border-radius":"50%",position:"absolute",left:"10px",bottom:"10px",display:"flex",cursor:"pointer","user-select":"none","justify-content":"center","align-items":"center"},style:"background-color:"+t.strokeStyle,on:{click:function(e){t.settingVisible=!t.settingVisible}}},[n("img",{attrs:{src:"img/icon/setting.png",alt:""}})]),!t.capturing&&t.settingVisible?n("div",{staticClass:"controls",staticStyle:{position:"absolute",left:"70px",bottom:"0px",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[n("div",{staticClass:"tips",staticStyle:{width:"100%",display:"flex","flex-direction":"row-reverse","justify-content":"space-between"}},[n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.strokeStyle,expression:"strokeStyle"}],staticStyle:{"min-width":"5px","min-height":"5px",padding:"0","border-radius":"50%",overflow:"hidden",border:"1px solid black","margin-right":"5px"},style:{width:t.lineWidth+"px",height:t.lineWidth+"px"},attrs:{type:"color",disabled:t.eraser},domProps:{value:t.strokeStyle},on:{input:function(e){e.target.composing||(t.strokeStyle=e.target.value)}}})]),n("div",{staticClass:"eraser",staticStyle:{display:"flex"},on:{click:function(e){t.eraser=!t.eraser}}},[n("div",{staticClass:"button clickable btn-raised",class:{active:t.eraser},staticStyle:{transition:"0s","margin-top":"auto",width:"30px",height:"30px"}},[n("img",{attrs:{src:"img/icon/eraser.svg"}})])])]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.rangeVal,expression:"rangeVal"}],staticStyle:{"min-width":"200px",width:"25vw",height:"5vw"},attrs:{type:"range",list:"tickmarks",min:"1",max:"50"},domProps:{value:t.rangeVal},on:{__r:function(e){t.rangeVal=e.target.value}}})]):t._e(),!t.capturing&&t.settingVisible?n("div",{staticClass:"controls",staticStyle:{position:"absolute",left:"10px",bottom:"50px",display:"flex","flex-direction":"column","justify-content":"center","align-items":"flex-start"}},[n("div",{staticClass:"button clickable btn-raised"},[n("img",{attrs:{src:"img/icon/clean.svg",alt:""},on:{click:function(e){return t.clearCanvas(!1)}}})]),n("div",{staticClass:"button clickable btn-raised",staticStyle:{padding:"8px"}},[n("img",{attrs:{src:"img/icon/save.svg",alt:""},on:{click:t.save}})]),n("div",{staticClass:"button clickable btn-raised",staticStyle:{padding:"8px"}},[n("img",{attrs:{src:"img/icon/fullscreen-"+(t.isFullscreen?"exit":"enter")+".svg"},on:{click:t.fullscreen}})])]):t._e()])},d=[],p=(n("a481"),n("75fc")),f=n("5d73"),w=n.n(f),v=n("c0e9"),g=n.n(v),m=new a["a"];window.h2c=g.a;var b={data:function(){return{isFullscreen:!1,settingVisible:!1,canvas:null,context:null,cb_lastPoints:{},can_width:400,can_height:200,rangeVal:10,strokeStyle:"#005AFF",backColor:"rgb(255,255,255)",eraser:!1,capturing:!1}},mounted:function(){var t=this;this.canvas=this.$refs.cbook,this.can_height=window.screen.height,this.can_width=window.screen.width,this.context=this.canvas.getContext("2d"),this.context.globalCompositeOperation="destination-atop",this.context.lineWidth=this.lineWidth,this.context.strokeStyle=this.eraser?this.backColor:this.strokeStyle.hex8||this.strokeStyle,this.context.lineCap="round",this.context.beginPath(),this.canvas.onmousedown=this.startDraw,this.canvas.onmouseup=this.stopDraw,this.canvas.ontouchstart=this.startDraw,this.canvas.ontouchstop=this.stopDraw,this.canvas.ontouchmove=this.drawMouse,m.$on("canvasDraw",this.drawRemoteLines),m.$on("canvasClear",function(){return t.clearCanvas(!0)})},methods:{startDraw:function(t){if(t.touches)for(var e=1;e<=t.touches.length;e++){var n=this.getCoords(t.touches[e-1]);this.cb_lastPoints[t.touches[e-1].identifier]=n}else{var r=this.getCoords(t);this.cb_lastPoints[0]=r,this.canvas.onmousemove=this.drawMouse}return!1},stopDraw:function(t){t.preventDefault(),this.canvas.onmousemove=null},drawMouse:function(t){var e,n=[];if(t.touches)for(var r=1;r<=t.touches.length;r++){e=this.getCoords(t.touches[r-1]);var i=[this.cb_lastPoints[t.touches[r-1].identifier].x,this.cb_lastPoints[t.touches[r-1].identifier].y,e.x,e.y];this.cb_lastPoints[t.touches[r-1].identifier]=this.drawLine.apply(this,i),n.push(i)}else{e=this.getCoords(t);var o=[this.cb_lastPoints[0].x,this.cb_lastPoints[0].y,e.x,e.y];n.push(o),this.cb_lastPoints[0]=this.drawLine.apply(this,o)}return this.context.lineWidth=this.lineWidth,this.context.strokeStyle=this.eraser?this.backColor:this.strokeStyle.hex8||this.strokeStyle,this.context.lineCap="round",this.context.stroke(),this.$emit("draw",{type:"drawLine",coords:n,lineCap:this.context.lineCap,strokeStyle:this.context.strokeStyle,lineWidth:this.context.lineWidth}),this.context.closePath(),this.context.beginPath(),!1},drawLine:function(t,e,n,r){return this.context.moveTo(t,e),this.context.lineTo(n,r),{x:n,y:r}},drawRemoteLines:function(t){this.context.beginPath();var e=!0,n=!1,r=void 0;try{for(var i,o=w()(t.coords);!(e=(i=o.next()).done);e=!0){var a=i.value;this.drawLine.apply(this,Object(p["a"])(a))}}catch(s){n=!0,r=s}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}this.context.lineWidth=t.lineWidth,this.context.strokeStyle=t.strokeStyle,this.context.lineCap=t.lineCap,this.context.stroke(),this.context.closePath()},getCoords:function(t){return t.offsetX?{x:t.offsetX,y:t.offsetY}:t.layerX?{x:t.layerX,y:t.layerY}:{x:t.pageX-this.canvas.offsetLeft,y:t.pageY-this.canvas.offsetTop}},clearCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.context.clearRect(0,0,this.canvas.width,this.canvas.height),t||this.$emit("clear")},save:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.capturing=!0,t.next=3,this.$nextTick();case 3:g()(this.$refs.container).then(function(t){var n=document.createElement("a");n.setAttribute("download","MintyPaper.png"),n.setAttribute("href",t.toDataURL("image/png").replace("image/png","image/octet-stream")),e.capturing=!1,n.click()});case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),fullscreen:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.isFullscreen?window.document.exitFullscreen():this.$refs.container.requestFullscreen(),this.isFullscreen=!this.isFullscreen;case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},computed:{lineWidth:function(){return this.rangeVal<25?this.rangeVal:this.rangeVal<40?1.5*this.rangeVal:2*this.rangeVal}},watch:{tips:{deep:!0,handler:function(){}},strokeStyle:function(t){console.log(t)}}},x=b,y=(n("3a61"),n("2877")),k=Object(y["a"])(x,h,d,!1,null,null,null),C=k.exports,S=n("795b"),_=n.n(S),R={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun.stunprotocol.org"}]};function O(t){return D.apply(this,arguments)}function D(){return D=Object(i["a"])(regeneratorRuntime.mark(function t(e){var n,r,o,a,s,c;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,o=new _.a(function(t){return n=t}),a={offer:null,answer:null,setAnswer:function(t){return a.pc.setRemoteDescription(new RTCSessionDescription(t))},pc:new RTCPeerConnection(R),connected:new _.a(function(t){return r=t}),channel:{dataChannel:null,on:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};t&&(a.__eventListeners[t]=e)},emit:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e,n){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.connected;case 2:a.channel.dataChannel.send(u()({event:e,data:n}));case 3:case"end":return t.stop()}},t)}));function e(e,n){return t.apply(this,arguments)}return e}()},__eventListeners:{}},s=function(t){try{var e=JSON.parse(t.data);e.candidate?a.pc.addIceCandidate(e.candidate).catch(console.error):a.__eventListeners[e.event]&&a.__eventListeners[e.event](e.data)}catch(n){console.error(n)}},a.pc.onicecandidate=function(t){if(t.candidate)return c?a.connected.then(function(){a.channel.dataChannel.send(u()({candidate:t.candidate.toJSON()}))}):(c=!0,n())},e){t.next=14;break}return a.channel.dataChannel=a.pc.createDataChannel("dataChannel"),a.channel.dataChannel.onopen=function(){a.channel.dataChannel.onmessage=s,r()},a.pc.createOffer().then(function(t){a.pc.setLocalDescription(t)}).catch(console.error),t.next=11,o;case 11:a.offer=a.pc.localDescription.toJSON(),t.next=18;break;case 14:return a.pc.ondatachannel=function(t){a.channel.dataChannel=t.channel,r(),a.channel.dataChannel.onmessage=s},t.next=17,a.pc.setRemoteDescription(e).then(function(){return a.pc.createAnswer()}).then(function(t){return a.pc.setLocalDescription(t)}).then(function(){return o}).then(function(){return a.pc.localDescription.toJSON()});case 17:a.answer=t.sent;case 18:return t.abrupt("return",a);case 21:return t.prev=21,t.t0=t["catch"](0),console.error(t.t0),t.abrupt("return",null);case 25:case"end":return t.stop()}},t,null,[[0,21]])})),D.apply(this,arguments)}var P={data:function(){return{showpopup:!1,conn:null,server:!0}},components:{whiteboard:C},created:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=window.location.hash.slice(1),e){this.server=!1;try{e=JSON.parse(decodeURIComponent(e))}catch(r){console.error(r),alert("provided link is now correct!!!"),window.location=window.location.href.slice(0,window.location.href.indexOf("#"))}}return t.next=4,O(e);case 4:this.conn=t.sent,this.conn.channel.on("canvasDraw",function(t){console.log("remoteDraw"),m.$emit("canvasDraw",t)}),this.conn.channel.on("canvasClear",function(t){console.log("remoteclear"),m.$emit("canvasClear",t)}),this.conn.offer?(console.log(window.location+"#"+encodeURIComponent(u()(this.conn.offer))),n=window.prompt(window.location+"#"+encodeURIComponent(u()(this.conn.offer))),n=decodeURIComponent(n),this.conn.setAnswer(JSON.parse(n))):window.alert(encodeURIComponent(u()(this.conn.answer)));case 8:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){window.setTimeout(function(){var t=document.getElementById("preloader");t&&(t.style.transition=".3s",t.style.opacity=0,setTimeout(function(){return t.parentNode.removeChild(t)},300))},1e3)},methods:{clearDrawing:function(){this.conn.channel.emit("canvasClear",{})},sendDrawing:function(t){this.conn.channel.emit("canvasDraw",t)},createconnection:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,O();case 2:this.conn=t.sent,this.conn.channel.on("canvasDraw",function(t){m.$emit("canvasDraw",t)}),this.conn.channel.on("canvasClear",function(t){m.$emit("canvasClear",t)}),console.log(window.location+"#"+encodeURIComponent(u()(this.conn.offer))),e=window.prompt(window.location+"#"+encodeURIComponent(u()(this.conn.offer))),e=decodeURIComponent(e),this.conn.setAnswer(JSON.parse(e));case 9:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),popupanswer:function(){}},watch:{},computed:{}},j=P,L=(n("5c0b"),Object(y["a"])(j,s,c,!1,null,null,null)),V=L.exports;n("1449"),window.serverconfig=o;var W=n("fe3c");W.attach(document.body),n("8aa8"),a["a"].mixin({data:function(){return{}}}),a["a"].config.productionTip=!0,new a["a"]({data:{user:null,showmoviedetail:!1,movie:{}},render:function(t){return t(V)}}).$mount("#app");var N=function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,window.navigator.wakeLock.request("screen");case 3:window.wakeLock=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),console.error(t.t0);case 9:case"end":return t.stop()}},t,null,[[0,6]])}));return function(){return t.apply(this,arguments)}}();N();var T=function(){null!==window.wakeLock&&"visible"===window.document.visibilityState&&N()};window.document.addEventListener("visibilitychange",T),window.document.addEventListener("fullscreenchange",T)},"5c0b":function(t,e,n){"use strict";var r=n("5e27"),i=n.n(r);i.a},"5e27":function(t,e,n){},"87b8":function(t,e,n){},"8aa8":function(t,e,n){"use strict";n.r(e);var r,i,o=n("f499"),a=n.n(o),s=(n("34ef"),n("a481"),n("14b9"),n("795b")),c=n.n(s),l=(n("cadf"),n("551c"),n("f751"),n("097d"),n("9483")),u="BJIGTwPsHQ_J1Yg_9xbUDLnrz_jTq8-nDxuU3_nXPF7-DNU645CLMBsrm73g6HefM74RSTjtLr2upgWKQ30SFLk";function h(t){for(var e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/-/g,"+").replace(/_/g,"/"),r=window.atob(n),i=new Uint8Array(r.length),o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}window.serviceWorkerPromise=new c.a(function(t){return r=t}),window.subscribeUser=function(){return new c.a(function(t,e){if("granted"==window.Notification.permission)return t('localStorage.getItem("pushNotificationCredentials")');window.serviceWorkerPromise.then(function(n){n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:h(u)}).then(function(e){window.localStorage.setItem("pushNotificationCredentials",a()(e)),t(e)}).catch(e)})})},window.propforinstall=null,Object(l["a"])("".concat("/whiteboard/","service-worker.js"),{registered:r}),(window.navigator||{}).serviceWorker&&window.navigator.serviceWorker.ready.then(function(){window.addEventListener("beforeinstallprompt",function(t){t.preventDefault(),i=t,window.propforinstall=function(){i.prompt(),i.userChoice.then(function(t){"accepted"===t.outcome&&window.subscribeUser(),i=null})}})})},9180:function(t,e,n){},cb1b:function(t,e,n){}});