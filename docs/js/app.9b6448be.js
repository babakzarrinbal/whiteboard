(function(t){function e(e){for(var r,o,s=e[0],c=e[1],l=e[2],d=0,p=[];d<s.length;d++)o=s[d],i[o]&&p.push(i[o][0]),i[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(p.length)p.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(r=!1)}r&&(a.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},i={app:0},a=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/whiteboard/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"06dc":function(t,e,n){},1449:function(t,e,n){"use strict";n.r(e);n("c5f6");var r=n("795b"),i=n.n(r),a=(n("96cf"),n("3b8d"));window.delay=function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new i.a(function(t){return setTimeout(t,e)}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),Number.prototype.round=function(t){var e=window.Math.pow(10,t);return window.Math.round(this*e)/e}},"3a61":function(t,e,n){"use strict";var r=n("cb1b"),i=n.n(r);i.a},"56d7":function(t,e,n){"use strict";n.r(e);n("96cf");var r,i=n("3b8d");n("cadf"),n("551c"),n("f751"),n("097d");r={socket:{url:"https://diliviri.com/",namespace:"superadmin"},http:{main:"db/"}};var a=r,o=(n("ab8b"),n("87b8"),n("9180"),n("2b0e")),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition-group",{attrs:{name:"opacity"}},[n("whiteboard",{key:"1",style:t.showpopup?"filter:blur(4px)":"",on:{clear:t.clearDrawing,draw:t.sendDrawing,"show-group":function(e){t.showpopup=!0}}}),t.showpopup?n("popup",{key:"2",on:{dismiss:function(e){t.showpopup=!1}}}):t._e()],1)},c=[],l=n("5d73"),u=n.n(l),d=n("f499"),p=n.n(d),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"container",staticStyle:{position:"relative",width:"100%",height:"100%","background-color":"white",overflow:"hidden"}},[n("div",{staticClass:"canvascontainer",staticStyle:{position:"relative",width:"vw",height:"vh","background-color":"white"}},[n("canvas",{ref:"cbook",staticStyle:{position:"relative"},style:t.eraser?"cursor: no-drop;":"",attrs:{width:t.can_width,height:t.can_height},on:{dblclick:function(e){return t.console.log("test")}}},[n("strong",[t._v("[Your browser can not show this example.]")])])]),t.capturing?t._e():n("div",{staticClass:"settings",staticStyle:{border:"1px solid black",padding:"8px","background-color":"rgb(63 117 255)",width:"40px",height:"40px","border-radius":"50%",position:"absolute",left:"10px",bottom:"10px",display:"flex",cursor:"pointer","user-select":"none","justify-content":"center","align-items":"center"},style:"background-color:"+t.strokeStyle,on:{click:function(e){t.settingVisible=!t.settingVisible}}},[n("img",{attrs:{src:"img/icon/draw.svg",at:""}})]),!t.capturing&&t.settingVisible?n("div",{staticClass:"controls",staticStyle:{position:"absolute",left:"70px",bottom:"0px",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[n("div",{staticClass:"tips",staticStyle:{width:"100%",display:"flex","flex-direction":"row-reverse","justify-content":"space-between"}},[n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.strokeStyle,expression:"strokeStyle"}],staticStyle:{"min-width":"5px","min-height":"5px",padding:"0","border-radius":"50%",overflow:"hidden",border:"1px solid black","margin-right":"5px"},style:{width:t.lineWidth+"px",height:t.lineWidth+"px"},attrs:{type:"color",disabled:t.eraser},domProps:{value:t.strokeStyle},on:{input:function(e){e.target.composing||(t.strokeStyle=e.target.value)}}})]),n("div",{staticClass:"eraser",staticStyle:{display:"flex"},on:{click:function(e){t.eraser=!t.eraser}}},[n("div",{staticClass:"button clickable btn-raised",class:{active:t.eraser},staticStyle:{transition:"0s","margin-top":"auto",width:"30px",height:"30px"}},[n("img",{attrs:{src:"img/icon/eraser.svg"}})])])]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.rangeVal,expression:"rangeVal"}],staticStyle:{"min-width":"200px",width:"25vw",height:"5vw"},attrs:{type:"range",list:"tickmarks",min:"1",max:"50"},domProps:{value:t.rangeVal},on:{__r:function(e){t.rangeVal=e.target.value}}})]):t._e(),!t.capturing&&t.settingVisible?n("div",{staticClass:"controls",staticStyle:{position:"absolute",left:"10px",bottom:"50px",display:"flex","flex-direction":"column","justify-content":"center","align-items":"flex-start"}},[n("div",{staticClass:"button clickable btn-raised",staticStyle:{padding:"8px"},on:{click:function(e){return t.$emit("show-group")}}},[n("img",{attrs:{src:"img/icon/add-group.png",alt:""}})]),n("div",{staticClass:"button clickable btn-raised"},[n("img",{attrs:{src:"img/icon/clean.svg",alt:""},on:{click:function(e){return t.clearCanvas(!1)}}})]),n("div",{staticClass:"button clickable btn-raised",staticStyle:{padding:"8px"}},[n("img",{attrs:{src:"img/icon/save.svg",alt:""},on:{click:t.save}})]),n("div",{staticClass:"button clickable btn-raised",staticStyle:{padding:"8px"}},[n("img",{attrs:{src:"img/icon/fullscreen-"+(t.isFullscreen?"exit":"enter")+".svg"},on:{click:t.fullscreen}})])]):t._e()])},f=[],g=(n("a481"),n("75fc")),w=n("c0e9"),m=n.n(w),v=new o["a"];window.h2c=m.a;var b={data:function(){return{isFullscreen:!1,settingVisible:!1,canvas:null,context:null,cb_lastPoints:{},can_width:400,can_height:200,rangeVal:10,strokeStyle:"#005AFF",backColor:"rgb(255,255,255)",eraser:!1,capturing:!1,console:window.console}},mounted:function(){var t=this;this.canvas=this.$refs.cbook,this.context=this.canvas.getContext("2d"),this.initDrawing(),v.$on("canvasDraw",this.drawRemoteLines),v.$on("canvasClear",function(){return t.clearCanvas(!0)})},methods:{initDrawing:function(){this.can_height=window.screen.height,this.can_width=window.screen.width,this.context.beginPath(),this.canvas.onmousedown=this.startDraw,this.canvas.onmouseup=this.stopDraw,this.canvas.ontouchstart=this.startDraw,this.canvas.ontouchstop=this.stopDraw,this.canvas.ontouchmove=this.drawMouse},startDraw:function(t){if(t.touches)for(var e=1;e<=t.touches.length;e++){var n=this.getCoords(t.touches[e-1]);this.cb_lastPoints[t.touches[e-1].identifier]=n}else{var r=this.getCoords(t);this.cb_lastPoints[0]=r,this.canvas.onmousemove=this.drawMouse}return!1},stopDraw:function(t){t.preventDefault(),this.canvas.onmousemove=null},drawMouse:function(t){var e,n=[];if(t.touches)for(var r=1;r<=t.touches.length;r++){e=this.getCoords(t.touches[r-1]);var i=[this.cb_lastPoints[t.touches[r-1].identifier].x,this.cb_lastPoints[t.touches[r-1].identifier].y,e.x,e.y];this.cb_lastPoints[t.touches[r-1].identifier]=this.drawLine.apply(this,i),n.push(i)}else{e=this.getCoords(t);var a=[this.cb_lastPoints[0].x,this.cb_lastPoints[0].y,e.x,e.y];n.push(a),this.cb_lastPoints[0]=this.drawLine.apply(this,a)}return this.context.lineWidth=this.lineWidth,this.context.strokeStyle=this.eraser?this.backColor:this.strokeStyle.hex8||this.strokeStyle,this.context.lineCap="round",this.strokeStyle.a&&this.strokeStyle.a<1&&(this.context.globalCompositeOperation="xor"),this.context.stroke(),this.$emit("draw",{type:"drawLine",coords:n,lineCap:this.context.lineCap,strokeStyle:this.context.strokeStyle,lineWidth:this.context.lineWidth}),this.context.closePath(),this.context.beginPath(),!1},drawLine:function(t,e,n,r){return this.context.moveTo(t,e),this.context.lineTo(n,r),{x:n,y:r}},drawRemoteLines:function(t){this.context.beginPath();var e=!0,n=!1,r=void 0;try{for(var i,a=u()(t.coords);!(e=(i=a.next()).done);e=!0){var o=i.value;this.drawLine.apply(this,Object(g["a"])(o))}}catch(s){n=!0,r=s}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}this.context.lineWidth=t.lineWidth,this.context.strokeStyle=t.strokeStyle,this.context.lineCap=t.lineCap,this.context.stroke(),this.context.closePath()},getCoords:function(t){return t.offsetX?{x:t.offsetX,y:t.offsetY}:t.layerX?{x:t.layerX,y:t.layerY}:{x:t.pageX-this.canvas.offsetLeft,y:t.pageY-this.canvas.offsetTop}},clearCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.context.clearRect(0,0,this.canvas.width,this.canvas.height),t||this.$emit("clear")},save:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.capturing=!0,t.next=3,this.$nextTick();case 3:m()(this.$refs.container).then(function(t){var n=document.createElement("a");n.setAttribute("download","MintyPaper.png"),n.setAttribute("href",t.toDataURL("image/png").replace("image/png","image/octet-stream")),e.capturing=!1,n.click()});case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),fullscreen:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.isFullscreen?window.document.exitFullscreen():this.$refs.container.requestFullscreen(),this.isFullscreen=!this.isFullscreen;case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},computed:{lineWidth:function(){return this.rangeVal<25?this.rangeVal:this.rangeVal<40?1.5*this.rangeVal:2*this.rangeVal}},watch:{tips:{deep:!0,handler:function(){}},strokeStyle:function(t){console.log(t)}}},y=b,x=(n("3a61"),n("2877")),k=Object(x["a"])(y,h,f,!1,null,null,null),C=k.exports,_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex-center",attrs:{id:"popup"},on:{click:function(e){return e.stopPropagation(),t.$emit("dismiss")}}},[n("div",{staticClass:"popup-modal",on:{click:function(t){t.stopPropagation()}}},[n("group")],1)])},S=[],D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"list-group"},[n("li",{staticClass:"list-group-item flex-center flex-column"},[n("div",{staticClass:"my-pimg flex-center mb-1 text-dark clickable btn-raised",class:{"p-0 bg-dark":t.mypimg,"p-2":!t.mypimg},staticStyle:{height:"70px",width:"70px",border:"1px solid black","border-radius":"50%",overflow:"hidden"},on:{click:function(e){return t.$refs.fileinput.click()}}},[n("img",{attrs:{src:t.mypimg?t.mypimg:"img/icon/default-user.svg",alt:""}})]),n("input",{ref:"fileinput",staticClass:"d-none",attrs:{type:"file",accept:"image/x-png, image/gif, image/jpeg"},on:{change:t.uploadimg}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.mypname,expression:"mypname"}],staticClass:"pname w-100",style:"no_name"===t.mypname.slice(0,7)?"color:gray;":"",attrs:{type:"text"},domProps:{value:t.mypname},on:{change:t.updateName,input:function(e){e.target.composing||(t.mypname=e.target.value)}}})]),n("li",{staticClass:"list-group-item list-group-item-action d-flex align-items-center clickable",on:{click:t.addUser}},[t._m(0),n("div",{staticClass:"detail ml-2"},[t._v("ADD New User")])]),t._l(t.$root.group,function(e,r){return n("li",{key:r,staticClass:"list-group-item list-group-item-action d-flex flex-column "},[n("div",{staticClass:"userinfo d-flex w-100 align-items-center clickable",on:{click:function(t){e.showdetail=!e.showdetail}}},[n("div",{staticClass:"pimg flex-center p-1",staticStyle:{height:"40px",width:"40px",border:"1px solid gray","border-radius":"50%"}},[n("img",{attrs:{src:e.profile.img||"img/icon/default-user.svg",alt:""}})]),n("div",{staticClass:"detail ml-2"},[t._v(t._s(e.profile.name||"noname"))])]),!e.answered||e.showdetail?n("div",{staticClass:"usrdetail"},[n("div",{staticClass:"my-2 offer position-relative py-2"},[n("span",{staticClass:"p-1",staticStyle:{"background-color":"#323dff",color:"white","border-radius":"4px","max-width":"300px",display:"block","overflow-x":"scroll","white-space":"nowrap"}},[t._v(t._s(e.offerLink))]),n("div",{staticClass:"share position-absolute clickable",staticStyle:{top:"10px",right:"10px"},on:{click:function(n){return n.stopPropagation(),t.copy(e.offerLink)}}},[n("img",{staticStyle:{width:"25px",height:"25px","background-color":"#ffffff8c"},attrs:{src:"img/icon/copy.svg",alt:""}})]),t.shareEnabled?n("div",{staticClass:"copy position-absolute clickable",staticStyle:{top:"10px",right:"50px"},on:{click:function(n){return n.stopPropagation(),t.share(e.offerLink)}}},[n("img",{staticStyle:{width:"25px",height:"25px","background-color":"#ffffff8c"},attrs:{src:"img/icon/share.svg",alt:""}})]):t._e()]),e.answered?n("div",{staticClass:"my-2 offer position-relative py-2"},[n("span",{staticClass:"p-1",staticStyle:{"background-color":"#07ce07",color:"white","border-radius":"4px","max-width":"300px",display:"block","overflow-x":"scroll","white-space":"nowrap"}},[t._v(t._s(e.answer))]),n("div",{staticClass:"share position-absolute clickable",staticStyle:{top:"10px",right:"10px"},on:{click:function(n){return n.stopPropagation(),t.copy(e.answer)}}},[n("img",{staticStyle:{width:"25px",height:"25px","background-color":"#ffffff8c"},attrs:{src:"img/icon/copy.svg",alt:""}})]),t.shareEnabled?n("div",{staticClass:"copy position-absolute clickable",staticStyle:{top:"10px",right:"50px"},on:{click:function(n){return n.stopPropagation(),t.share(e.answer)}}},[n("img",{staticStyle:{width:"25px",height:"25px","background-color":"#ffffff8c"},attrs:{src:"img/icon/share.svg",alt:""}})]):t._e()]):t._e(),e.answered?t._e():n("div",{staticClass:"answer d-flex flex-column"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.answer,expression:"u.answer"}],attrs:{placeholder:"Answer"},domProps:{value:e.answer},on:{input:function(n){n.target.composing||t.$set(e,"answer",n.target.value)}}})]),e.answered?t._e():n("div",{staticClass:"w-100 my-2 btn btn-success",on:{click:function(n){return t.confirmUser(e)}}},[t._v("confirm")])]):t._e()])})],2)},P=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pimg flex-center p-1",staticStyle:{height:"40px",width:"40px",border:"1px solid gray","border-radius":"50%"}},[n("img",{attrs:{src:"img/icon/add-user.svg",alt:""}})])}],R=(n("7514"),n("795b")),O=n.n(R),j={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun.2.google.com:19302"},{urls:"stun:stun.3.google.com:19302"},{urls:"stun:stun.4.google.com:19302"},{urls:"stun:stun.stunprotocol.org"}]};function L(t){return $.apply(this,arguments)}function $(){return $=Object(i["a"])(regeneratorRuntime.mark(function t(e){var n,r,a,o,s,c;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,a=new O.a(function(t){return n=t}),o={offer:null,answer:null,setAnswer:function(t){return o.pc.setRemoteDescription(new RTCSessionDescription(t))},pc:new RTCPeerConnection(j),connected:new O.a(function(t){return r=t}),channel:{dataChannel:null,on:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};t&&(o.__eventListeners[t]=e)},emit:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e,n){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o.connected;case 2:o.channel.dataChannel.send(p()({event:e,data:n}));case 3:case"end":return t.stop()}},t)}));function e(e,n){return t.apply(this,arguments)}return e}()},__eventListeners:{}},s=function(t){try{var e=JSON.parse(t.data);e.candidate?o.pc.addIceCandidate(e.candidate).catch(console.error):o.__eventListeners[e.event]&&o.__eventListeners[e.event](e.data)}catch(n){console.error(n)}},o.pc.onicecandidate=function(t){if(t.candidate)return c?o.connected.then(function(){o.channel.dataChannel.send(p()({candidate:t.candidate.toJSON()}))}):(c=!0,n())},e){t.next=14;break}return o.channel.dataChannel=o.pc.createDataChannel("dataChannel"),o.channel.dataChannel.onopen=function(){o.channel.dataChannel.onmessage=s,r()},o.pc.createOffer().then(function(t){o.pc.setLocalDescription(t)}).catch(console.error),t.next=11,a;case 11:o.offer=o.pc.localDescription.toJSON(),t.next=18;break;case 14:return o.pc.ondatachannel=function(t){o.channel.dataChannel=t.channel,r(),o.channel.dataChannel.onmessage=s},t.next=17,o.pc.setRemoteDescription(e).then(function(){return o.pc.createAnswer()}).then(function(t){return o.pc.setLocalDescription(t)}).then(function(){return a}).then(function(){return o.pc.localDescription.toJSON()});case 17:o.answer=t.sent;case 18:return t.abrupt("return",o);case 21:return t.prev=21,t.t0=t["catch"](0),console.error(t.t0),t.abrupt("return",null);case 25:case"end":return t.stop()}},t,null,[[0,21]])})),$.apply(this,arguments)}var N={data:function(){return{mypimg:window.localStorage.getItem("wb-mypimg"),mypname:window.localStorage.getItem("wb-mypname")||"no_name",shareEnabled:"share"in window.navigator}},created:function(){},methods:{uploadimg:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.adjustImg(e.target.files[0]);case 2:this.mypimg=t.sent,this.$refs.fileinput.files=null,this.$refs.fileinput.value="",window.localStorage.setItem("wb-mypimg",this.mypimg);case 6:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),adjustImg:function(t){return new O.a(function(e){var n=new FileReader;n.onload=function(){var t=new Image;t.onload=function(){var n=document.createElement("canvas"),r=544,i=t.width,a=t.height;i>a?i>r&&(a*=r/i,i=r):a>r&&(i*=r/a,a=r),n.width=i,n.height=a,n.getContext("2d").drawImage(t,0,0,i,a);var o=n.toDataURL("image/png");e(o)},t.src=this.result},n.readAsDataURL(t)})},updateName:function(){window.localStorage.setItem("wb-mypname",this.mypname)},addUser:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,L();case 2:e=t.sent,e.channel.on("canvasDraw",function(t){return v.$emit("canvasDraw",t)}),e.channel.on("canvasClear",function(t){return v.$emit("canvasClear",t)}),n=this.$root.group.reduce(function(t,e){return t>e.id?t:e.id},0)+1,r={connection:e,id:n,answered:!1,profile:{},answer:"",showdetail:!1,offerLink:window.location+"#"+encodeURIComponent(p()({offer:e.offer,id:n}))},this.$root.group.push(r),console.log(e.offer),console.log(r.offerLink);case 10:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),confirmUser:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,n=JSON.parse(window.decodeURIComponent(e.answer)),t.next=7;break;case 4:return t.prev=4,t.t0=t["catch"](0),t.abrupt("return",alert("error parsing answer"));case 7:if(r=this.$root.group.find(function(t){return t.id==n.id}),r&&!0!==r.answered){t.next=10;break}return t.abrupt("return",window.alert("wrong or duplicated answer!!!"));case 10:return r.connection.setAnswer(n.answer),t.next=13,r.connection.connected;case 13:r.answered=!0;case 14:case"end":return t.stop()}},t,this,[[0,4]])}));function e(e){return t.apply(this,arguments)}return e}(),share:function(t){window.navigator.share({title:"invite link to whiteboard app",url:"babakzarrinbal.github.io/whiteboard",text:t,files:null})},copy:function(t){if(t){var e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),alert("Text copied to clipboard!!!")}}},watch:{"$root.group":{deep:!0,handler:function(){}}}},U=N,I=(n("ec31"),Object(x["a"])(U,D,P,!1,null,"1012959c",null)),T=I.exports,V={components:{group:T}},E=V,W=(n("f60c"),Object(x["a"])(E,_,S,!1,null,"549ff88d",null)),M=W.exports,F={data:function(){return{console:window.console,showpopup:!1,conn:null,server:!0}},components:{whiteboard:C,popup:M},created:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=window.location.hash.slice(1),!e){t.next=6;break}this.server=!1;try{e=JSON.parse(decodeURIComponent(e))}catch(i){console.error(i),alert("provided link is now correct!!!"),window.location=window.location.href.slice(0,window.location.href.indexOf("#"))}t.next=7;break;case 6:return t.abrupt("return");case 7:return t.next=9,L(e.offer);case 9:n=t.sent,n.channel.on("canvasDraw",function(t){return v.$emit("canvasDraw",t)}),n.channel.on("canvasClear",function(t){return v.$emit("canvasClear",t)}),r=encodeURIComponent(p()({answer:n.answer,id:e.id})),console.log(n.answer),console.log(r),this.$root.group.push({connection:n,id:1,answered:!0,profile:{},offerLink:window.location.href,showdetail:!0,answer:r}),this.showpopup=!0;case 17:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){window.setTimeout(function(){var t=document.getElementById("preloader");t&&(t.style.transition=".3s",t.style.opacity=0,setTimeout(function(){return t.parentNode.removeChild(t)},300))},1e3)},methods:{clearDrawing:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=u()(this.$root.group);!(t=(r=i.next()).done);t=!0){var a=r.value;a.connection.channel.emit("canvasClear",{})}}catch(o){e=!0,n=o}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}},sendDrawing:function(t){var e=!0,n=!1,r=void 0;try{for(var i,a=u()(this.$root.group);!(e=(i=a.next()).done);e=!0){var o=i.value;o.connection.channel.emit("canvasDraw",t)}}catch(s){n=!0,r=s}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}}},watch:{"$root.group":{deep:!0,handler:function(){}}},computed:{}},A=F,J=(n("5c0b"),Object(x["a"])(A,s,c,!1,null,null,null)),X=J.exports;n("1449"),window.serverconfig=a;var Y=n("fe3c");Y.attach(document.body),n("8aa8"),o["a"].mixin({data:function(){return{group:[]}}}),o["a"].config.productionTip=!0,new o["a"]({data:{user:null,showmoviedetail:!1,movie:{}},render:function(t){return t(X)}}).$mount("#app");var q=function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,window.navigator.wakeLock.request("screen");case 3:window.wakeLock=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),console.error(t.t0);case 9:case"end":return t.stop()}},t,null,[[0,6]])}));return function(){return t.apply(this,arguments)}}();q();var B=function(){null!==window.wakeLock&&"visible"===window.document.visibilityState&&q()};window.document.addEventListener("visibilitychange",B),window.document.addEventListener("fullscreenchange",B)},"5c0b":function(t,e,n){"use strict";var r=n("5e27"),i=n.n(r);i.a},"5d0a":function(t,e,n){},"5e27":function(t,e,n){},"87b8":function(t,e,n){},"8aa8":function(t,e,n){"use strict";n.r(e);var r,i,a=n("f499"),o=n.n(a),s=(n("34ef"),n("a481"),n("14b9"),n("795b")),c=n.n(s),l=(n("cadf"),n("551c"),n("f751"),n("097d"),n("9483")),u="BJIGTwPsHQ_J1Yg_9xbUDLnrz_jTq8-nDxuU3_nXPF7-DNU645CLMBsrm73g6HefM74RSTjtLr2upgWKQ30SFLk";function d(t){for(var e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/-/g,"+").replace(/_/g,"/"),r=window.atob(n),i=new Uint8Array(r.length),a=0;a<r.length;++a)i[a]=r.charCodeAt(a);return i}window.serviceWorkerPromise=new c.a(function(t){return r=t}),window.subscribeUser=function(){return new c.a(function(t,e){if("granted"==window.Notification.permission)return t('localStorage.getItem("pushNotificationCredentials")');window.serviceWorkerPromise.then(function(n){n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:d(u)}).then(function(e){window.localStorage.setItem("pushNotificationCredentials",o()(e)),t(e)}).catch(e)})})},window.propforinstall=null,Object(l["a"])("".concat("/whiteboard/","service-worker.js"),{registered:r}),(window.navigator||{}).serviceWorker&&window.navigator.serviceWorker.ready.then(function(){window.addEventListener("beforeinstallprompt",function(t){t.preventDefault(),i=t,window.propforinstall=function(){i.prompt(),i.userChoice.then(function(t){"accepted"===t.outcome&&window.subscribeUser(),i=null})}})})},9180:function(t,e,n){},cb1b:function(t,e,n){},ec31:function(t,e,n){"use strict";var r=n("5d0a"),i=n.n(r);i.a},f60c:function(t,e,n){"use strict";var r=n("06dc"),i=n.n(r);i.a}});